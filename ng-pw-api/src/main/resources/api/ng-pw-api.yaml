# NG Product Wizard REST API
swagger: '2.0'

info:
  title: NG Product Wizard API
  description: REST API for NG Product Wizard
  version: "0.0.1"

host: localhost:8443

schemes:
  - https

basePath: /ng-pw-rest

paths:
  /security/authentication:
    post:
      summary: Authenticate a user.
      description: |
        This endpoint is used to authenticate a user,
        and return the corresponding session token.
      consumes:
        - application/json
      produces:
        - application/json
      operationId: authenticate
      parameters:
        - name: credentials
          in: body
          description: |
            Credentials required to authenticate a user.
          required: true
          schema: 
            $ref: '#/definitions/credentials'
      tags:
        - Security
      responses:
        200:
          description: |
            OK.  Authentication completed successfully.  A token
            used to link service requests to the corresponding security
            session, is returned.
          schema:
            $ref: '#/definitions/sessionToken'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /security/logout:
    post:
      summary: Logout a user.
      description: |
        This endpoint is used to terminate the session corresponding to
        the provided token, thus logging out the user, who created the session. 
      produces:
        - application/json
      operationId: logout
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
      tags:
        - Security
      responses:
        200:
          description: |
            OK.  Logout has been successfully completed, and
            the corresponding security session has been invalidated. 
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/common/environment:
    get:
      summary: Retrieve a list of Environments.
      description: |
        This endpoint returns a list of Environments configured in
        the Product Wizard installation, which the authenticated user
        is authorized to access. 
      produces:
        - application/json
      operationId: getCommonEnvironments
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Environments has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments.
        404:
          description: |
            Not Found.  No configured environments have been found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/company:
    get:
      summary: Retrieve a list of Company Codes for Business Rule views.
      description: |
        This endpoint returns a list of Company Codes, which
        the authenticated user is authorized to access, for
        filters in Business Rule views. 
      produces:
        - application/json
      operationId: getPlanCompanyCodes
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Company Codes has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/product:
    get:
      summary: Retrieve a list of Product Codes for Business Rule views.
      description: |
        This endpoint returns a list of Product Codes for
        filters in Business Rule views.
      produces:
        - application/json
      operationId: getPlanProductCodes
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
        - name: companyCode
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Product Codes has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/plan:
    get:
      summary: Retrieve a list of Plan Codes for Business Rule views.
      description: |
        This endpoint returns a list of Plan Codes
        for filters in Business Rule views.
      produces:
        - application/json
      operationId: getPlanPlanCodes
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
        - name: companyCode
          in: header
          required: true
          type: string
        - name: productCode
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Plan Codes has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/state:
    get:
      summary: Retrieve a list of Issue States for Business Rule views.
      description: |
        This endpoint returns a list of Issue States
        for filters in Business Rule views.
      produces:
        - application/json
      operationId: getPlanIssueStates
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
        - name: companyCode
          in: header
          required: true
          type: string
        - name: productCode
          in: header
          required: true
          type: string
        - name: planCode
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Issue States has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/lob:
    get:
      summary: Retrieve a list of Lines of Business for Business Rule views.
      description: |
        This endpoint returns a list of Lines of Business
        for filters in Business Rule views.
      produces:
        - application/json
      operationId: getPlanLobs
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
        - name: companyCode
          in: header
          required: true
          type: string
        - name: productCode
          in: header
          required: true
          type: string
        - name: planCode
          in: header
          required: true
          type: string
        - name: issueState
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Lines of Business has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/effdate:
    get:
      summary: Retrieve a list of Effective Dates for Business Rule views.
      description: |
        This endpoint returns a list of Effective Dates
        for filters in Business Rule views.
      produces:
        - application/json
      operationId: getPlanEffDates
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: viewChanges
          in: header
          required: true
          type: boolean
        - name: envId
          in: header
          required: true
          type: string
        - name: companyCode
          in: header
          required: true
          type: string
        - name: productCode
          in: header
          required: true
          type: string
        - name: planCode
          in: header
          required: true
          type: string
        - name: issueState
          in: header
          required: true
          type: string
        - name: lob
          in: header
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Effective Dates has been
            successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/dateSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the configured environments and/or companies.
        404:
          description: |
            Not Found.  No data found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/project:
    get:
      summary: Retrieve a list of Projects for Business Rule views.
      description: |
        This endpoint returns a list of Projects existing
        in the indicated environment.
      produces:
        - application/json
      operationId: getPlanProjects
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: envId
          in: header
          description: |
            Environment Id.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The requested list of projects has been
            successfully retrieved.
          schema:
            type: array
            items:
              type: string
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment.
        404:
          description: |
            Not Found.  No projects found matching the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/plan/table:
    get:
      summary: Search for business rule tables for the Entire Table View.
      description: |
        This endpoint is used to search for business rule tables for
        the Entire Table View.
      produces:
        - application/json
      operationId: getPlanTables
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: envId
          in: header
          description: |
            Environment.
          required: true
          type: string
        - name: companyCode
          in: header
          description: |
            Company Code.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The requested list of business rule
            tables projects has been successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment or company.
        404:
          description: |
            Not Found.  No business rule tables found matching
            the provided key values. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'

  /search/changes/environment:
    get:
      summary: |
        Retrieve a list of Environments, which have pending changes
        in WIP.
      description: |
        This endpoint returns a list of Environments configured in
        the Product Wizard installation, which the authenticated user
        is authorized to access, and which have pending changes in WIP.
      produces:
        - application/json
      operationId: getChangesEnvironments
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  The list of Environments matching the required criteria
            has been successfully retrieved.
          schema:
            type: array
            items:
              $ref: '#/definitions/commonSelectItem'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            any of the applicable environments.
        404:
          description: |
            Not Found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/changes/filter:
    get:
      summary: |
        Retrieve key values used for filtering of data in the Changes Only view.
      description: |
        This endpoint returns information, which can be used for filtering
        of changes shown in Changes Only view.  This information includes
        packages, business rule tables, and User Ids, all reflecting existing
        rows in WIP, which correspond to the provided Environment Id.
      produces:
        - application/json
      operationId: getChangesFilterValues
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: envId
          in: header
          description: |
            Environment Id.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  All applicable data has been successfully retrieved.
          schema:
            $ref: '#/definitions/changesFilterData'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment.
        404:
          description: |
            Not Found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/apply/filter:
    get:
      summary: |
        Retrieve key values used for filtering of data in the Apply Changes view.
      description: |
        This endpoint returns information, which can be used for filtering
        of changes shown in Apply Changes view.  This information includes
        packages and projects, reflecting existing rows in WIP, which correspond
        to the provided Environment Id.
      produces:
        - application/json
      operationId: getApplyFilterValues
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: envId
          in: header
          description: |
            Environment Id.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  All applicable data has been successfully retrieved.
          schema:
            $ref: '#/definitions/applyFilterData'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment.
        404:
          description: |
            Not Found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/audit/filter:
    get:
      summary: |
        Retrieve key values used for filtering of data in the Audit/Error view.
      description: |
        This endpoint returns information, which can be used for filtering
        of changes shown in Audit/Error view.  This information includes
        packages, projects, business rule tables, and users, all reflecting
        existing data, which corresponds to the provided Environment Id.
      produces:
        - application/json
      operationId: getAuditFilterValues
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: filterAspect 
          in: header
          description: |
            Switch used to request filter data for either Audit Log
            or Error aspect of this view.
            Supported values are: 'A', and 'E'.
          required: true
          type: string
        - name: envId
          in: header
          description: |
            Environment Id.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  All applicable data has been successfully retrieved.
          schema:
            $ref: '#/definitions/auditFilterData'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment.
        404:
          description: |
            Not Found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

  /search/promote/filter:
    get:
      summary: |
        Retrieve key values used for filtering of data in the Promote view.
      description: |
        This endpoint returns information, which can be used for filtering
        of changes shown in Promote view.  This information includes
        packages and projects reflecting existing data, which corresponds
        to the provided Environment Id.
      produces:
        - application/json
      operationId: getPromoteFilterValues
      parameters:
        - name: sessionToken
          in: header
          description: | 
            Session Token.
          required: true
          type: string
        - name: sourceEnvId
          in: header
          description: |
            Source Environment Id.
          required: true
          type: string
        - name: targetEnvId
          in: header
          description: |
            Target Environment Id.
          required: true
          type: string
      tags:
        - Search
      responses:
        200:
          description: |
            OK.  All applicable data has been successfully retrieved.
          schema:
            $ref: '#/definitions/promoteFilterData'
        400:
          description: |
            Bad Request.  Invalid or malformed request detected.
          schema: 
            $ref: '#/definitions/errorModel'
        401:
          description: |
            Unauthorized.  Required authorization information not found.
            Session token is either missing or invalid. 
        403:
          description: |
            Forbidden.  The user is not authorized to access
            the indicated environment.
        404:
          description: |
            Not Found. 
          schema: 
            $ref: '#/definitions/errorModel'
        default:
          description: Unexpected Error.
          schema: 
            $ref: '#/definitions/errorModel'

definitions:
  credentials:
    type: object
    properties:
      userName:
        type: string
        description: Unique identification of a user.
      password:
        type: string
        description: Password.

  sessionToken:
    type: string
    properties:
      tokenId:
        type: string
        description: A token used to link service requests to the corresponding security session. 

  commonSelectItem:
    type: object
    properties:
      coreValue:
        type: string
        description: The internal representation of value of this item.
      displayValue:
        type: string
        description: Representation of value of this item suitable for display.

  dateSelectItem:
    type: object
    properties:
      coreValue:
        type: string
        format: date
        description: The internal representation of value of this item.
      displayValue:
        type: string
        description: Representation of value of this item suitable for display.

  changesFilterData:
    type: object
    properties:
      projects:
        type: array
        items:
          type: string
      businessRuleTables:
        type: array
        items:
          $ref: '#/definitions/commonSelectItem'
      users:
        type: array
        items:
          type: string

  applyFilterData:
    type: object
    properties:
      packages:
        type: array
        items:
          type: string
      projects:
        type: array
        items:
          type: string

  auditFilterData:
    type: object
    properties:
      packages:
        type: array
        items:
          type: string
      projects:
        type: array
        items:
          type: string
      businessRuleTables:
        type: array
        items:
          $ref: '#/definitions/commonSelectItem'
      users:
        type: array
        items:
          type: string

  promoteFilterData:
    type: object
    properties:
      packages:
        type: array
        items:
          type: string
      projects:
        type: array
        items:
          type: string

  errorModel:
    type: object
    properties:
      severity:
        type: string
        enum:
          - ERROR
          - WARNING
      errorCode:
        type: string
      message:
        type: string
